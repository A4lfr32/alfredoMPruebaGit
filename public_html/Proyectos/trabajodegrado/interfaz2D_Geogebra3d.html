
<!DOCTYPE html>
<html>
<head>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta charset="utf-8"/>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.geogebra.org/apps/deployggb.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163888921-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'UA-163888921-1');
  </script>
</head>
<body>
<br>
<br>
<button class="btn btn-outline-secondary" onclick="history.back()" style="
position: absolute;
left: 18px;
top: 12px;
">Atr√°s</button>
<div class="container">
    <div class="row">
        <div class="col-7" style="text-align: -webkit-center;">
            <div class="row">
        <div id="ggbApplet"></div>
    </div>
    <br>
    <div class="row">
        <div class="col-10" style="padding-left: 100px;">
        <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">X_1</span>
                </div>
                <input id="input1" type="text" class="form-control" placeholder="Coordenada x" aria-label="Username" aria-describedby="basic-addon1">
                <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">Y_1</span>
                      </div>
                      <input id="input2" type="text" class="form-control" placeholder="Coordenada x" aria-label="Username" aria-describedby="basic-addon1">
                      
                <div class="input-group-append">
                        <button id="btn1" class="btn btn-outline-secondary" type="button">Actualizar</button>
                      </div>
              </div>

        

                  
                    <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1">X_2</span>
                          </div>
                          <input id="input3" type="text" class="form-control" placeholder="Coordenada x" aria-label="Username" aria-describedby="basic-addon1">
                          <div class="input-group-prepend">
                                  <span class="input-group-text" id="basic-addon1">Y_2</span>
                                </div>
                                <input id="input4" type="text" class="form-control" placeholder="Coordenada x" aria-label="Username" aria-describedby="basic-addon1">
                                
                          <div class="input-group-append">
                                  <button id="btn2" class="btn btn-outline-secondary" type="button">Actualizar</button>
                                </div>
                        </div>
            </div>
          
<button id="connect" type="button">Connect</button>

<button id="disconnect" type="button">Disconnect</button>

<div id="terminal"></div>

<form id="send-form">
    <input id="input" type="text">
    <button type="submit">Send</button>
</form>
          </div>
        </div>
        <div class="col-5" style="text-align: center;align-self: center;">
            <div class="row" style="justify-content: center;">
            <img class="card" id="my_image" src="https://placehold.it/500x300" alt=""></div>
            <br>
        <div class="row">
                <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1">IP:</span>
                        </div>
                        <input id="inputIP" type="text" class="form-control" placeholder="Streamming..." aria-label="Username" aria-describedby="basic-addon1">                              
                        <div class="input-group-append">
                                <button id="btnIP" class="btn btn-outline-secondary" type="button">Cargar</button>
                              </div>
                      </div>
        </div>
    </div>

        <br>


                

                
        
    </div>
</div>
            <script>
var parameters = {
"id": "ggbApplet",
"width":600,
"height":350,
"showMenuBar":false,
"showAlgebraInput":false,
"showToolBar":false,
"customToolBar":"0 77 73 62 | 1 501 67 , 5 19 , 72 75 76 | 2 15 45 , 18 65 , 7 37 | 4 3 8 9 , 13 44 , 58 , 47 | 16 51 64 , 70 | 10 34 53 11 , 24  20 22 , 21 23 | 55 56 57 , 12 | 36 46 , 38 49  50 , 71  14  68 | 30 29 54 32 31 33 | 25 17 26 60 52 61 | 40 41 42 , 27 28 35 , 6",
"showToolBarHelp":true,
"showResetIcon":false,
"enableLabelDrags":false,
"enableShiftDragZoom":true,
"enableRightClick":false,
"errorDialogsActive":false,
"useBrowserForJS":false,
"allowStyleBar":false,
"preventFocus":false,
"showZoomButtons":true,
"capturingThreshold":3,
// add code here to run when the applet starts
"appletOnLoad":function(api){ /* api.evalCommand('Segment((1,2),(3,4))');*/ },
"showFullscreenButton":true,
"scale":1,
"disableAutoScale":false,
"allowUpscale":false,
"clickToLoad":false,
"appName":"classic",
"showSuggestionButtons":true,
"buttonRounding":0.7,
"buttonShadows":false,
"language":"es",
// use this instead of ggbBase64 to load a material from geogebra.org
// "material_id":"RHYH3UQ8",
// use this instead of ggbBase64 to load a .ggb file
// "filename":"myfile.ggb",
"ggbBase64":"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",

};
// is3D=is 3D applet using 3D view, AV=Algebra View, SV=Spreadsheet View, CV=CAS View, EV2=Graphics View 2, CP=Construction Protocol, PC=Probability Calculator DA=Data Analysis, FI=Function Inspector, macro=Macros
var views = {'is3D': 1,'AV': 0,'SV': 0,'CV': 0,'EV2': 0,'CP': 0,'PC': 0,'DA': 0,'FI': 0,'macro': 0};

var applet = new GGBApplet(parameters, '5.0', views);
window.onload = function() {applet.inject('ggbApplet')};
applet.setPreviewImage('data:image/gif;base64,R0lGODlhAQABAAAAADs=','https://www.geogebra.org/images/GeoGebra_loading.png','https://www.geogebra.org/images/applet_play.png');
   

                    parameters.appletOnLoad = function(api) {
                      c_1_inicial = Math.round(ggbApplet.getValue("a_1"));
                      c_2_inicial = Math.round(ggbApplet.getValue("b_1"));
                      let c_1_actual = Math.round(ggbApplet.getValue("a_1"));
                      let c_2_actual = Math.round(ggbApplet.getValue("b_1"));
                      diff_c_1 = (c_1_actual-c_1_inicial);
                      diff_c_2 = (c_2_actual-c_2_inicial);


    ggbApplet.registerObjectUpdateListener("P_0",myAupdateListenerFunction);
    ggbApplet.registerObjectUpdateListener("A",moverLazo2);
    ggbApplet.registerObjectUpdateListener("S_1",SoporteUpdate);
    ggbApplet.registerObjectUpdateListener("S_2",SoporteUpdate);
    ggbApplet.registerObjectClickListener("A", TrayectoriaLinea);
    
    function TrayectoriaLinea() {
      P_0_x =ggbApplet.getXcoord("P_0");
      P_0_y =ggbApplet.getYcoord("P_0");
      flagTrayectoria = 1;

    }

    function moverLazo2() {
      //setCoords(P_0,x(P_0+0.01*(A-P_0)),y(P_0+0.01*(A-P_0)));
      ggbApplet.setCoords('P_0',ggbApplet.getXcoord("P_0")+0.01*(ggbApplet.getXcoord("A")-ggbApplet.getXcoord("P_0")),ggbApplet.getYcoord("P_0")+0.01*(ggbApplet.getYcoord("A")-ggbApplet.getYcoord("P_0")));
      //ggbApplet.setCoords('P_0',10,10);
      //console.log(x(P_0+0.01*(A-P_0)));
      //console.log(ggbApplet.getXcoord("P_0")+0.01*(ggbApplet.getXcoord("A")-ggbApplet.getXcoord("P_0")));
      //console.log(ggbApplet.getXcoord("P_0")+0.01*(ggbApplet.getXcoord("A")-ggbApplet.getXcoord("P_0")));
      //console.log(ggbApplet.getYcoord("P_0")+0.01*(ggbApplet.getYcoord("A")-ggbApplet.getYcoord("P_0")));
    }

    function SoporteUpdate() {
      c_1_inicial = Math.round(ggbApplet.getValue("d"));
      c_2_inicial = Math.round(ggbApplet.getValue("e"));
    }
    function myAupdateListenerFunction() {
      c_1_actual = Math.round(ggbApplet.getValue("a_1"));
      c_2_actual = Math.round(ggbApplet.getValue("b_1"));

      diff_c_1 = (c_1_actual-c_1_inicial);
      diff_c_2 = (c_2_actual-c_2_inicial);
      if (flag == 0) {
        flag=1;
        console.log("encenderFlag");
      send(new Uint8Array(dectobin(diff_c_1,163).concat(dectobin(diff_c_2,171)))); // Send text field contents
      //send(new Uint8Array(dectobin(diff_c_1,163))); // Send text field contents
    }
  //console.log("C1: "+(diff_c_1)+", C2: "+(diff_c_2));
  //console.log(dectobin(diff_c_1,163));
  //console.log(dectobin(diff_c_2,171));
  }


    }
  


                    </script>


<script>
  var cont = 0;
  var P_0_x;
  var P_0_y;

  var flagTrayectoria;
var c_1_inicial;
var c_2_inicial;

var diff_c_1;
var diff_c_2;
var flag = 0;

function dectobin(num,motor) {
  var base2 = (num >>> 0).toString(2);
  var hi = "0b"+base2.padStart(32, '0');

  return bytes = [motor,
    (hi >> 24) & 0xFF,
    (hi >> 16) & 0xFF,
    (hi >> 8) & 0xFF,
    hi & 0xFF,
    motor+1
];
console.log(bytes);

}

   // function appletOnLoad(api){ api.evalCommand('Segment((1,2),(3,4))'); alert("asfre");}
   // ggbApplet.appletOnLoad(api) {
  //alert("asfre");
//}


$(document).ready(function(){





  $("#btn1").click(function(){
      var x1 = $(input1).val();
      var y1 = $(input2).val();
      ggbApplet.setCoords('S_1',x1,y1);

  });
  $("#btn2").click(function(){
      var x2 = $(input3).val();
      var y2 = $(input4).val();
      ggbApplet.setCoords('S_2',x2,y2);

  });

  $("#btnIP").click(function(){
    var IP = $(inputIP).val();
    alert(IP+":81\/stream");
    $("#my_image").attr("src",IP+":81\/stream");
  });
  

});


</script>


<script>

// Get references to UI elements
let connectButton = document.getElementById('connect');
let disconnectButton = document.getElementById('disconnect');
let terminalContainer = document.getElementById('terminal');
let sendForm = document.getElementById('send-form');
let inputField = document.getElementById('input');

// Connect to the device on Connect button click
connectButton.addEventListener('click', function() {
  connect();
});

// Disconnect from the device on Disconnect button click
disconnectButton.addEventListener('click', function() {
  disconnect();
});

// Handle form submit event
sendForm.addEventListener('submit', function(event) {
  event.preventDefault(); // Prevent form sending
 // console.log("7: "+diff_c_1);
if (flag==0) {
  console.log("AAA");
  flag = 1;
  send(new Uint8Array(dectobin(diff_c_1,163).concat(dectobin(diff_c_2,171)))); // Send text field contents
 
  // inputField.value = '';  // Zero text field
  //inputField.focus();     // Focus on text field
}
});

// Selected device object cache
let deviceCache = null;

// Characteristic object cache
let characteristicCache = null;

// Intermediate buffer for incoming data
let readBuffer = '';

// Launch Bluetooth device chooser and connect to the selected
function connect() {
  return (deviceCache ? Promise.resolve(deviceCache) :
      requestBluetoothDevice()).
      then(device => connectDeviceAndCacheCharacteristic(device)).
      then(characteristic => startNotifications(characteristic)).
      catch(error => log(error));
}

function requestBluetoothDevice() {
  //log('Requesting bluetooth device...');

  return navigator.bluetooth.requestDevice({
    filters: [{services: [0xFFE0]}],
  }).
      then(device => {
    //    log('"' + device.name + '" bluetooth device selected');
        deviceCache = device;
        deviceCache.addEventListener('gattserverdisconnected',
            handleDisconnection);

        return deviceCache;
      });
}

function handleDisconnection(event) {
  let device = event.target;

//  log('"' + device.name +
 //     '" bluetooth device disconnected, trying to reconnect...');

  connectDeviceAndCacheCharacteristic(device).
      then(characteristic => startNotifications(characteristic)).
      catch(error => log(error));
}

// Connect to the device specified, get service and characteristic
function connectDeviceAndCacheCharacteristic(device) {
  if (device.gatt.connected && characteristicCache) {
    return Promise.resolve(characteristicCache);
  }

  //log('Connecting to GATT server...');

  return device.gatt.connect().
      then(server => {
      //  log('GATT server connected, getting service...');

        return server.getPrimaryService(0xFFE0);
      }).
      then(service => {
     //   log('Service found, getting characteristic...');

        return service.getCharacteristic(0xFFE1);
      }).
      then(characteristic => {
       // log('Characteristic found');
        characteristicCache = characteristic;

        return characteristicCache;
      });
}

// Enable the characteristic changes notification
function startNotifications(characteristic) {
  //log('Starting notifications...');

  return characteristic.startNotifications().
      then(() => {
    //    log('Notifications started');
        characteristic.addEventListener('characteristicvaluechanged',
            handleCharacteristicValueChanged);
      });
}

// Data receiving
function handleCharacteristicValueChanged(event) {
  let value = new TextDecoder().decode(event.target.value);

  for (let c of value) {
    if (c === '\n') {
      let data = readBuffer.trim();
      readBuffer = '';

      if (data) {
        receive(data);
      }
    }
    else {
      readBuffer += c;
    }
  }
}

// Received data handling
function receive(data) {
  log(data, 'in');
}

// Output to terminal
function log(data, type = '') {
 // terminalContainer.insertAdjacentHTML('beforeend',
   //   '<div' + (type ? ' class="' + type + '"' : '') + '>' + data + '</div>');
  //    console.log("3: "+data);

}

// Disconnect from the connected device
function disconnect() {
  if (deviceCache) {
    log('Disconnecting from "' + deviceCache.name + '" bluetooth device...');
    deviceCache.removeEventListener('gattserverdisconnected',
        handleDisconnection);

    if (deviceCache.gatt.connected) {
      deviceCache.gatt.disconnect();
      log('"' + deviceCache.name + '" bluetooth device disconnected');
    }
    else {
      log('"' + deviceCache.name +
          '" bluetooth device is already disconnected');
    }
  }

  if (characteristicCache) {
    characteristicCache.removeEventListener('characteristicvaluechanged',
        handleCharacteristicValueChanged);
    characteristicCache = null;
  }

  deviceCache = null;
}

// Send data to the connected device
function send(data) {
//  console.log("1: "+data);
//  console.log("6: "+data.buffer);
  //data = String(data);
  if (!data || !characteristicCache) {
    return;
  }

  //data += '\n';

  if (data.length > 20) {
    let chunks = data.match(/(.|[\r\n]){1,20}/g);

    writeToCharacteristic(characteristicCache, chunks[0]);

    for (let i = 1; i < chunks.length; i++) {
      setTimeout(() => {
        writeToCharacteristic(characteristicCache, chunks[i]);
      }, i * 100);
    }
  }
  else {
  //  console.log("2: "+data);

    writeToCharacteristic(characteristicCache, data);
  }

  log(data, 'out');
}

function writeToCharacteristic(characteristic, data) {
 // console.log("5: "+ (data.buffer));
 // console.log("4: "+ (data));

  characteristic.writeValue(data);
}


$(function(){
setInterval(oneSecondFunction, 200);
});

function oneSecondFunction() {
  console.log("c1_I: "+c_1_inicial+" c2_I: "+c_2_inicial);

  console.log("apagar Flag");
flag = 0;

if (flagTrayectoria==1){

      ggbApplet.setCoords('P_0',P_0_x+cont*0.01*(ggbApplet.getXcoord("A")-P_0_x),P_0_y+cont*0.01*(ggbApplet.getYcoord("A")-P_0_y));
cont++; 

if (cont == 10) {
flagTrayectoria = 0;
cont=0;
}
}

}
</script>
</body>
</html>
